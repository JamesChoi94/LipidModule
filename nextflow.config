includeConfig 'config/schedulers.config'

// Process ---------------------
process {
    withLabel:Query_GEO {
      cpus   = { 2 }
      memory = { 2.GB }
    }
    withLabel:Dump_FASTQ {
      cpus   = { 2 }
      memory = { 2.GB }
    }
    withLabel:Trim_Adapters {
      cpus   = { 2 }
      memory = { 8.GB }
    }
    withLabel:Raw_FastQC {
      cpus  = { 2 }
      memory = { 8.GB }
    }
    withLabel:Trimmed_FastQC {
      cpus  = { 2 }
      memory = { 8.GB }
    }
    withLabel:Build_Index {
      cpus  = { 8 }
      memory = { 64.GB }
    }
    withLabel:Align_Reads {
      cpus  = { 2 }
      memory = { 64.GB }
    }
}

// Params
params {

  // Nextflow params
  publishmode = "copy"
  sleep = 1
  resultsDir = "results"

  // Testing parameters (see profile:testing)
  forTesting = false

  // Run parameters for rnaseq-processing
  saveFastq = false
  samplesheet = "data/samplesheet.csv"
  dataDir = "data"
  genomeDir = "ref"
  readsDir = "data/rawdata"
  
  // Read QC parameters
  queryGEODir = "results/QueryGEO"
  FastQCDir = "results/FastQC"
  BBdukDir = "results/BBDuk"
  trimmedReadsDir = "data/trimmed_reads"

  // STAR aligner parameters
  readsLength = 100
  bamsDir = "data/STAR"
  genomeFasta = "ref/GRCm39.primary_assembly.genome.fa"
  annotationGTF = "ref/gencode.vM28.annotation.gtf"
  aligner = "STAR"
  indexDir = "ref/STAR_index"
}

profiles {
  conda {
    process.conda = '/root/miniconda3/envs/LipidModule'
  }
  condaLSF {
    process.conda = '/nethome/jsc228/miniconda3/envs/LipidModule'
  }
  testing {
    process {
      withLabel:Query_GEO {
        cpus   = { 1 }
        memory = { 2.GB }
      }
      withLabel:Dump_FASTQ {
        cpus   = { 2 }
        memory = { 2.GB }
      }
      withLabel:Trim_Adapters {
        cpus   = { 2 }
        memory = { 2.GB }
      }
      withLabel:Raw_FastQC {
        cpus  = { 2 }
        memory = { 2.GB }
      }
      withLabel:Trimmed_FastQC {
        cpus  = { 2 }
        memory = { 2.GB }
      }
      withLabel:Build_Index {
        cpus  = { 2 }
        memory = { 32.G }
      }
      withLabel:Align_Reads {
        cpus  = { 2 }
        memory = { 32.G }
      }
    }
    params {
      forTesting = true
      testReads = "data/testdata/*_{1,2}.fastq"
      testGenomeFasta = "ref/testgenome.fa"
      testAnnotation = "ref/testAnnotation.gtf"
    }
  }
}